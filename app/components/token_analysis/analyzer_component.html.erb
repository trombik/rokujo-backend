<%= tag.div class: "p-2 border-bottom" do %>
  <%= render SearchForm::TokenAnalysisComponent.new %>
<% end %>
<%= tag.div class: "card shadow-sm border-0" do %>
  <%= tag.div class: "card-header bg-white border-bottom py-3" do %>
    <%= link_to token_analysis_analyzer_path(text: text, format: :json), class: "text-decoration-none text-muted fw-bold small" do %>
      <%= tag.i class: "bi bi-braces" %> JSON
    <% end %>
    <%= tag.p class: "fs-4" do %>
      <% tokens.each do |token| %>
        <%= tag.span class:"badge bg-#{pos_color(token[:pos])} fw-nomal" do %>
          <%= token[:text] %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
  <%= tag.div class: "table-responsive" do %>
    <%= tag.table class: "table table-hover align-middle mb-0" do %>
      <%= tag.thead class: "table-light" do %>
        <%= tag.tr do %>
          <%= tag.th class: "text-center" do %>#<% end %>
          <%= tag.th do %>表記<% end %>
          <%= tag.th do %>依存関係<% end %>
          <%= tag.th do %>基本形<% end %>
          <%= tag.th do %>詳細<% end %>
          <%= tag.th do %>活用<% end %>
        <% end %>
      <% end %>
      <%= tag.tbody do %>
        <% @tokens.each do |t| %>
          <%= tag.tr do %>
            <%= tag.td class: "text-center text-muted" do %>
              <%= t[:i] %>
            <% end %>
            <%= tag.td do %>
              <%= tag.div class: "fw-bold" do %>
                <%= render Text::RubyComponent.new(t[:text], extract_reading(t[:morph])) %>
              <% end %>
              <%= tag.span class: "badge bg-#{pos_color(t[:pos])} fw-normal" do %>
                <%= t[:pos] %>
              <% end %>
            <% end %>
            <%= tag.td do %>
              <i class="bi bi-arrow-right-short"></i>
              <%= head(t)[:text] %>
              <%= tag.span class: "badge bg-#{pos_color(head(t)[:pos])} fw-normal" do %>
                <%= head(t)[:pos] %>
              <% end %>
              <%= tag.span class: "badge rounded-pill border text-dark fw-normal bg-white" do %>
                <%= t[:dep] %>
              <% end %>
            <% end %>
            <%= tag.td do %>
              <%= tag.span class: "text-muted small" do %>
                <%= t[:lemma] %>
              <% end %>
            <% end %>
            <%= tag.td do %>
              <%= tag.span class: "text-muted small" do %>
                <%= t[:tag] %>
              <% end %>
            <% end %>
            <%= tag.td do %>
              <%= tag.div class: "text-muted small" do %>
                <%= extract_inflection(t[:morph]) %>
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
